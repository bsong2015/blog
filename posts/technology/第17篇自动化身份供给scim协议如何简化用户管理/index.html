<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>万年水的博客</title><meta name=keywords content><meta name=description content="第17篇：自动化身份供给：SCIM协议如何简化用户管理
在之前的文章中，我们讨论了身份认证（Authentication）和授权管理（Authorization）的各种核心协议与模型。然而，一个完整的身份和访问管理（IAM）体系，不仅仅包括“谁能登录”和“谁能做什么”，还必须高效地解决“用户身份信息如何创建、更新和同步到各个应用”的问题。这正是身份供给（Identity Provisioning） 的职责所在。
想象一下，当一个新员工入职时，他需要访问公司的CRM、ERP、协作套件（如Office 365）等多个系统。如果每次都需要IT管理员手动在每个系统中创建账户、分配权限，这无疑是一项繁琐、耗时且容易出错的工作。当员工离职或部门调动时，手动管理带来的效率低下和安全风险（权限未及时撤销）将更加凸显。
SCIM（System for Cross-domain Identity Management）协议正是为了解决这一痛点而诞生的。它提供了一种标准化的方式，实现用户和组身份信息的自动化管理和跨域同步。
1. SCIM的目标：简化与标准化身份供给
SCIM是由IETF（互联网工程任务组）发布的一个开放标准，旨在简化和自动化用户和组身份信息在不同系统之间的交换。其核心目标可以概括为：

互操作性： 提供一个通用的、基于RESTful API的协议和JSON数据模型，使得任何支持SCIM的系统都能“开箱即用”地进行身份信息交换，避免了定制化开发带来的高成本和复杂性。
自动化： 实现用户生命周期管理（创建、更新、禁用、删除）的自动化，减少人工干预。
效率： 显著提升身份供给的效率，加速新员工入职、离职等流程。
安全性： 确保身份信息的准确性和及时性，降低因手动操作导致的权限配置错误和安全漏洞。
扩展性： 允许扩展核心的用户和组模式（Schema），以适应各种特定业务需求。

在现代的IDaaS（Identity as a Service） 解决方案中，SCIM扮演着至关重要的角色。IDaaS平台通常作为中央身份源，通过SCIM与下游的各种SaaS应用（如Salesforce, Slack, Google Workspace, Microsoft 365等）进行用户和组信息的自动化同步。
2. SCIM的核心资源：用户与组
SCIM协议定义了两个核心的资源类型，用于表示和管理身份信息：
2.1 用户（User）资源

定义： 代表了系统中的一个独立用户身份。
核心属性： SCIM User Schema定义了一套丰富的标准属性，包括：

userName：用户的唯一登录名（必填）。
id：资源的唯一标识符。
displayName：用户的显示名称。
name：包含givenName（名）、familyName（姓）等子属性。
emails：用户的邮箱地址（可以是多个，带类型如work, home）。
active：布尔值，表示用户是否活跃/启用（用于禁用/启用用户）。
password：密码（敏感信息，通常只用于设置/重置，不用于读取）。
groups：用户所属的组列表（引用）。


扩展性： SCIM允许服务提供者通过自定义的扩展模式（Extension Schema） 来添加标准模式中没有的额外属性，以满足特定应用的业务需求，例如自定义的员工ID、组织架构信息等。

2.2 组（Group）资源

定义： 代表了一组用户的集合。组在权限管理中非常有用，可以方便地对一组用户统一分配权限。
核心属性： SCIM Group Schema定义了：

displayName：组的显示名称。
members：组的成员列表，每个成员包含value（用户ID）和displayName（用户显示名）等。



SCIM通过这些标准化的资源和属性，确保了不同系统之间身份数据的一致性和可理解性。"><meta name=author content><link rel=canonical href=https://bsong2015.github.io/blog/posts/technology/%E7%AC%AC17%E7%AF%87%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BA%AB%E4%BB%BD%E4%BE%9B%E7%BB%99scim%E5%8D%8F%E8%AE%AE%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://bsong2015.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bsong2015.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bsong2015.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://bsong2015.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://bsong2015.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://bsong2015.github.io/blog/posts/technology/%E7%AC%AC17%E7%AF%87%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BA%AB%E4%BB%BD%E4%BE%9B%E7%BB%99scim%E5%8D%8F%E8%AE%AE%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://bsong2015.github.io/blog/posts/technology/%E7%AC%AC17%E7%AF%87%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BA%AB%E4%BB%BD%E4%BE%9B%E7%BB%99scim%E5%8D%8F%E8%AE%AE%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/"><meta property="og:site_name" content="万年水的博客"><meta property="og:title" content="万年水的博客"><meta property="og:description" content="第17篇：自动化身份供给：SCIM协议如何简化用户管理 在之前的文章中，我们讨论了身份认证（Authentication）和授权管理（Authorization）的各种核心协议与模型。然而，一个完整的身份和访问管理（IAM）体系，不仅仅包括“谁能登录”和“谁能做什么”，还必须高效地解决“用户身份信息如何创建、更新和同步到各个应用”的问题。这正是身份供给（Identity Provisioning） 的职责所在。
想象一下，当一个新员工入职时，他需要访问公司的CRM、ERP、协作套件（如Office 365）等多个系统。如果每次都需要IT管理员手动在每个系统中创建账户、分配权限，这无疑是一项繁琐、耗时且容易出错的工作。当员工离职或部门调动时，手动管理带来的效率低下和安全风险（权限未及时撤销）将更加凸显。
SCIM（System for Cross-domain Identity Management）协议正是为了解决这一痛点而诞生的。它提供了一种标准化的方式，实现用户和组身份信息的自动化管理和跨域同步。
1. SCIM的目标：简化与标准化身份供给 SCIM是由IETF（互联网工程任务组）发布的一个开放标准，旨在简化和自动化用户和组身份信息在不同系统之间的交换。其核心目标可以概括为：
互操作性： 提供一个通用的、基于RESTful API的协议和JSON数据模型，使得任何支持SCIM的系统都能“开箱即用”地进行身份信息交换，避免了定制化开发带来的高成本和复杂性。 自动化： 实现用户生命周期管理（创建、更新、禁用、删除）的自动化，减少人工干预。 效率： 显著提升身份供给的效率，加速新员工入职、离职等流程。 安全性： 确保身份信息的准确性和及时性，降低因手动操作导致的权限配置错误和安全漏洞。 扩展性： 允许扩展核心的用户和组模式（Schema），以适应各种特定业务需求。 在现代的IDaaS（Identity as a Service） 解决方案中，SCIM扮演着至关重要的角色。IDaaS平台通常作为中央身份源，通过SCIM与下游的各种SaaS应用（如Salesforce, Slack, Google Workspace, Microsoft 365等）进行用户和组信息的自动化同步。
2. SCIM的核心资源：用户与组 SCIM协议定义了两个核心的资源类型，用于表示和管理身份信息：
2.1 用户（User）资源 定义： 代表了系统中的一个独立用户身份。 核心属性： SCIM User Schema定义了一套丰富的标准属性，包括： userName：用户的唯一登录名（必填）。 id：资源的唯一标识符。 displayName：用户的显示名称。 name：包含givenName（名）、familyName（姓）等子属性。 emails：用户的邮箱地址（可以是多个，带类型如work, home）。 active：布尔值，表示用户是否活跃/启用（用于禁用/启用用户）。 password：密码（敏感信息，通常只用于设置/重置，不用于读取）。 groups：用户所属的组列表（引用）。 扩展性： SCIM允许服务提供者通过自定义的扩展模式（Extension Schema） 来添加标准模式中没有的额外属性，以满足特定应用的业务需求，例如自定义的员工ID、组织架构信息等。 2.2 组（Group）资源 定义： 代表了一组用户的集合。组在权限管理中非常有用，可以方便地对一组用户统一分配权限。 核心属性： SCIM Group Schema定义了： displayName：组的显示名称。 members：组的成员列表，每个成员包含value（用户ID）和displayName（用户显示名）等。 SCIM通过这些标准化的资源和属性，确保了不同系统之间身份数据的一致性和可理解性。"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="第17篇：自动化身份供给：SCIM协议如何简化用户管理
在之前的文章中，我们讨论了身份认证（Authentication）和授权管理（Authorization）的各种核心协议与模型。然而，一个完整的身份和访问管理（IAM）体系，不仅仅包括“谁能登录”和“谁能做什么”，还必须高效地解决“用户身份信息如何创建、更新和同步到各个应用”的问题。这正是身份供给（Identity Provisioning） 的职责所在。
想象一下，当一个新员工入职时，他需要访问公司的CRM、ERP、协作套件（如Office 365）等多个系统。如果每次都需要IT管理员手动在每个系统中创建账户、分配权限，这无疑是一项繁琐、耗时且容易出错的工作。当员工离职或部门调动时，手动管理带来的效率低下和安全风险（权限未及时撤销）将更加凸显。
SCIM（System for Cross-domain Identity Management）协议正是为了解决这一痛点而诞生的。它提供了一种标准化的方式，实现用户和组身份信息的自动化管理和跨域同步。
1. SCIM的目标：简化与标准化身份供给
SCIM是由IETF（互联网工程任务组）发布的一个开放标准，旨在简化和自动化用户和组身份信息在不同系统之间的交换。其核心目标可以概括为：

互操作性： 提供一个通用的、基于RESTful API的协议和JSON数据模型，使得任何支持SCIM的系统都能“开箱即用”地进行身份信息交换，避免了定制化开发带来的高成本和复杂性。
自动化： 实现用户生命周期管理（创建、更新、禁用、删除）的自动化，减少人工干预。
效率： 显著提升身份供给的效率，加速新员工入职、离职等流程。
安全性： 确保身份信息的准确性和及时性，降低因手动操作导致的权限配置错误和安全漏洞。
扩展性： 允许扩展核心的用户和组模式（Schema），以适应各种特定业务需求。

在现代的IDaaS（Identity as a Service） 解决方案中，SCIM扮演着至关重要的角色。IDaaS平台通常作为中央身份源，通过SCIM与下游的各种SaaS应用（如Salesforce, Slack, Google Workspace, Microsoft 365等）进行用户和组信息的自动化同步。
2. SCIM的核心资源：用户与组
SCIM协议定义了两个核心的资源类型，用于表示和管理身份信息：
2.1 用户（User）资源

定义： 代表了系统中的一个独立用户身份。
核心属性： SCIM User Schema定义了一套丰富的标准属性，包括：

userName：用户的唯一登录名（必填）。
id：资源的唯一标识符。
displayName：用户的显示名称。
name：包含givenName（名）、familyName（姓）等子属性。
emails：用户的邮箱地址（可以是多个，带类型如work, home）。
active：布尔值，表示用户是否活跃/启用（用于禁用/启用用户）。
password：密码（敏感信息，通常只用于设置/重置，不用于读取）。
groups：用户所属的组列表（引用）。


扩展性： SCIM允许服务提供者通过自定义的扩展模式（Extension Schema） 来添加标准模式中没有的额外属性，以满足特定应用的业务需求，例如自定义的员工ID、组织架构信息等。

2.2 组（Group）资源

定义： 代表了一组用户的集合。组在权限管理中非常有用，可以方便地对一组用户统一分配权限。
核心属性： SCIM Group Schema定义了：

displayName：组的显示名称。
members：组的成员列表，每个成员包含value（用户ID）和displayName（用户显示名）等。



SCIM通过这些标准化的资源和属性，确保了不同系统之间身份数据的一致性和可理解性。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bsong2015.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"技术实践","item":"https://bsong2015.github.io/blog/posts/technology/"},{"@type":"ListItem","position":3,"name":"","item":"https://bsong2015.github.io/blog/posts/technology/%E7%AC%AC17%E7%AF%87%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BA%AB%E4%BB%BD%E4%BE%9B%E7%BB%99scim%E5%8D%8F%E8%AE%AE%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"第17篇：自动化身份供给：SCIM协议如何简化用户管理 在之前的文章中，我们讨论了身份认证（Authentication）和授权管理（Authorization）的各种核心协议与模型。然而，一个完整的身份和访问管理（IAM）体系，不仅仅包括“谁能登录”和“谁能做什么”，还必须高效地解决“用户身份信息如何创建、更新和同步到各个应用”的问题。这正是身份供给（Identity Provisioning） 的职责所在。\n想象一下，当一个新员工入职时，他需要访问公司的CRM、ERP、协作套件（如Office 365）等多个系统。如果每次都需要IT管理员手动在每个系统中创建账户、分配权限，这无疑是一项繁琐、耗时且容易出错的工作。当员工离职或部门调动时，手动管理带来的效率低下和安全风险（权限未及时撤销）将更加凸显。\nSCIM（System for Cross-domain Identity Management）协议正是为了解决这一痛点而诞生的。它提供了一种标准化的方式，实现用户和组身份信息的自动化管理和跨域同步。\n1. SCIM的目标：简化与标准化身份供给 SCIM是由IETF（互联网工程任务组）发布的一个开放标准，旨在简化和自动化用户和组身份信息在不同系统之间的交换。其核心目标可以概括为：\n互操作性： 提供一个通用的、基于RESTful API的协议和JSON数据模型，使得任何支持SCIM的系统都能“开箱即用”地进行身份信息交换，避免了定制化开发带来的高成本和复杂性。 自动化： 实现用户生命周期管理（创建、更新、禁用、删除）的自动化，减少人工干预。 效率： 显著提升身份供给的效率，加速新员工入职、离职等流程。 安全性： 确保身份信息的准确性和及时性，降低因手动操作导致的权限配置错误和安全漏洞。 扩展性： 允许扩展核心的用户和组模式（Schema），以适应各种特定业务需求。 在现代的IDaaS（Identity as a Service） 解决方案中，SCIM扮演着至关重要的角色。IDaaS平台通常作为中央身份源，通过SCIM与下游的各种SaaS应用（如Salesforce, Slack, Google Workspace, Microsoft 365等）进行用户和组信息的自动化同步。\n2. SCIM的核心资源：用户与组 SCIM协议定义了两个核心的资源类型，用于表示和管理身份信息：\n2.1 用户（User）资源 定义： 代表了系统中的一个独立用户身份。 核心属性： SCIM User Schema定义了一套丰富的标准属性，包括： userName：用户的唯一登录名（必填）。 id：资源的唯一标识符。 displayName：用户的显示名称。 name：包含givenName（名）、familyName（姓）等子属性。 emails：用户的邮箱地址（可以是多个，带类型如work, home）。 active：布尔值，表示用户是否活跃/启用（用于禁用/启用用户）。 password：密码（敏感信息，通常只用于设置/重置，不用于读取）。 groups：用户所属的组列表（引用）。 扩展性： SCIM允许服务提供者通过自定义的扩展模式（Extension Schema） 来添加标准模式中没有的额外属性，以满足特定应用的业务需求，例如自定义的员工ID、组织架构信息等。 2.2 组（Group）资源 定义： 代表了一组用户的集合。组在权限管理中非常有用，可以方便地对一组用户统一分配权限。 核心属性： SCIM Group Schema定义了： displayName：组的显示名称。 members：组的成员列表，每个成员包含value（用户ID）和displayName（用户显示名）等。 SCIM通过这些标准化的资源和属性，确保了不同系统之间身份数据的一致性和可理解性。\n","keywords":[],"articleBody":"第17篇：自动化身份供给：SCIM协议如何简化用户管理 在之前的文章中，我们讨论了身份认证（Authentication）和授权管理（Authorization）的各种核心协议与模型。然而，一个完整的身份和访问管理（IAM）体系，不仅仅包括“谁能登录”和“谁能做什么”，还必须高效地解决“用户身份信息如何创建、更新和同步到各个应用”的问题。这正是身份供给（Identity Provisioning） 的职责所在。\n想象一下，当一个新员工入职时，他需要访问公司的CRM、ERP、协作套件（如Office 365）等多个系统。如果每次都需要IT管理员手动在每个系统中创建账户、分配权限，这无疑是一项繁琐、耗时且容易出错的工作。当员工离职或部门调动时，手动管理带来的效率低下和安全风险（权限未及时撤销）将更加凸显。\nSCIM（System for Cross-domain Identity Management）协议正是为了解决这一痛点而诞生的。它提供了一种标准化的方式，实现用户和组身份信息的自动化管理和跨域同步。\n1. SCIM的目标：简化与标准化身份供给 SCIM是由IETF（互联网工程任务组）发布的一个开放标准，旨在简化和自动化用户和组身份信息在不同系统之间的交换。其核心目标可以概括为：\n互操作性： 提供一个通用的、基于RESTful API的协议和JSON数据模型，使得任何支持SCIM的系统都能“开箱即用”地进行身份信息交换，避免了定制化开发带来的高成本和复杂性。 自动化： 实现用户生命周期管理（创建、更新、禁用、删除）的自动化，减少人工干预。 效率： 显著提升身份供给的效率，加速新员工入职、离职等流程。 安全性： 确保身份信息的准确性和及时性，降低因手动操作导致的权限配置错误和安全漏洞。 扩展性： 允许扩展核心的用户和组模式（Schema），以适应各种特定业务需求。 在现代的IDaaS（Identity as a Service） 解决方案中，SCIM扮演着至关重要的角色。IDaaS平台通常作为中央身份源，通过SCIM与下游的各种SaaS应用（如Salesforce, Slack, Google Workspace, Microsoft 365等）进行用户和组信息的自动化同步。\n2. SCIM的核心资源：用户与组 SCIM协议定义了两个核心的资源类型，用于表示和管理身份信息：\n2.1 用户（User）资源 定义： 代表了系统中的一个独立用户身份。 核心属性： SCIM User Schema定义了一套丰富的标准属性，包括： userName：用户的唯一登录名（必填）。 id：资源的唯一标识符。 displayName：用户的显示名称。 name：包含givenName（名）、familyName（姓）等子属性。 emails：用户的邮箱地址（可以是多个，带类型如work, home）。 active：布尔值，表示用户是否活跃/启用（用于禁用/启用用户）。 password：密码（敏感信息，通常只用于设置/重置，不用于读取）。 groups：用户所属的组列表（引用）。 扩展性： SCIM允许服务提供者通过自定义的扩展模式（Extension Schema） 来添加标准模式中没有的额外属性，以满足特定应用的业务需求，例如自定义的员工ID、组织架构信息等。 2.2 组（Group）资源 定义： 代表了一组用户的集合。组在权限管理中非常有用，可以方便地对一组用户统一分配权限。 核心属性： SCIM Group Schema定义了： displayName：组的显示名称。 members：组的成员列表，每个成员包含value（用户ID）和displayName（用户显示名）等。 SCIM通过这些标准化的资源和属性，确保了不同系统之间身份数据的一致性和可理解性。\n3. SCIM的核心操作：CRUD与批量处理 SCIM协议基于RESTful原则，定义了一系列标准的HTTP方法来对用户和组资源进行操作，类似于我们熟悉的CRUD（创建、读取、更新、删除）。\n3.1 创建（Create） 方法： POST 用途： 在目标系统中创建一个新的用户或组。 示例： 向 /Users 或 /Groups 端点发送一个包含用户/组JSON数据的POST请求。 3.2 读取（Retrieve） 方法： GET 用途： 获取一个特定用户/组的详细信息，或查询满足特定条件的用户/组列表。 示例： 获取单个用户：GET /Users/{id} 按用户名查询：GET /Users?filter=userName eq \"john.doe\" 分页查询：GET /Users?startIndex=1\u0026count=10 特性： SCIM支持丰富的过滤（filter）、排序（sortBy, sortOrder）和分页（startIndex, count）参数，以及指定返回属性（attributes, excludedAttributes），使得查询非常灵活高效。 3.3 更新（Update） 方法： PUT 或 PATCH 用途： 修改现有用户或组的信息。 PUT： 用于完全替换资源的现有状态（不常用，因为需要提交所有属性）。 PATCH： 用于部分更新资源。这是更推荐的方式，因为它允许只发送需要修改的属性，例如更改用户的部门、禁用用户、添加/移除组成员等。 示例： 更新用户：PATCH /Users/{id}，请求体中包含JSON Patch操作。 禁用用户：PATCH /Users/{id}，请求体 { \"active\": false }。 3.4 删除（Delete） 方法： DELETE 用途： 从目标系统中删除一个用户或组。 示例： DELETE /Users/{id} 3.5 批量操作（Bulk Operations） 方法： POST 到 /Bulk 端点 用途： 允许在一个HTTP请求中执行多个SCIM操作（创建、更新、删除），从而减少网络往返次数，提高同步效率。这对于同步大量用户或组时非常有用。 示例： 向 /Bulk 发送一个POST请求，请求体中包含一个操作数组，每个操作指定其方法、资源路径和数据。 4. SCIM在IDaaS中的应用 SCIM协议是现代IDaaS（Identity as a Service） 解决方案的核心能力之一。一个典型的应用场景是：\n中央身份源： 企业通常有一个中央身份目录（如Active Directory, LDAP）或是一个IDaaS平台本身作为主身份源。 IDaaS作为供给桥梁： IDaaS平台集成SCIM客户端功能，可以作为连接中央身份源和各种下游应用之间的桥梁。 自动化同步： 当新员工入职时，在中央身份源中创建其账户。IDaaS平台通过连接器（如AD Connector）感知到这一变化。 IDaaS平台随即触发SCIM协议，向所有支持SCIM的SaaS应用（例如Salesforce、Slack）发送POST /Users请求，自动为新员工创建账户。 当员工部门调动，其组发生变化时，IDaaS通过SCIM向相关应用发送PATCH /Users/{id}请求更新其组信息。 当员工离职时，IDaaS向各应用发送PATCH /Users/{id}（设置active: false禁用账户）或DELETE /Users/{id}请求，及时撤销其访问权限。 实时与定时同步： SCIM支持实时（事件驱动）或定时（批量）同步，以满足不同的业务需求。 graph TD A[IDaaS] -- SCIM协议 --\u003e B(Salesforce) A -- SCIM协议 --\u003e C(Slack) A -- SCIM协议 --\u003e D(O365) A -- SCIM协议 --\u003e E(其他SaaS应用) subgraph 用户和组自动化同步 A B C D E end 总结 SCIM协议是自动化身份供给的关键。它提供了一个标准化的、基于RESTful的框架，用于管理和同步用户与组的身份信息。通过定义统一的资源模式和操作方法，SCIM极大地降低了集成成本，提升了身份管理效率，并增强了安全性。在IDaaS解决方案中，SCIM更是扮演着核心角色，使得企业能够轻松实现跨域的用户生命周期自动化管理，告别繁琐的手动配置，让身份管理真正做到“一劳永逸”。\n欢迎关注+点赞+推荐+转发\n","wordCount":"209","inLanguage":"zh","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://bsong2015.github.io/blog/posts/technology/%E7%AC%AC17%E7%AF%87%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BA%AB%E4%BB%BD%E4%BE%9B%E7%BB%99scim%E5%8D%8F%E8%AE%AE%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/"},"publisher":{"@type":"Organization","name":"万年水的博客","logo":{"@type":"ImageObject","url":"https://bsong2015.github.io/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bsong2015.github.io/blog/ accesskey=h title="万年水的博客 (Alt + H)">万年水的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bsong2015.github.io/blog/posts/artificial-intelligence/ title=人工智能><span>人工智能</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/reading/ title=阅读><span>阅读</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/thinking-models/ title=思维模型><span>思维模型</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/thought-experiments/ title=思想实验><span>思想实验</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/personal-growth/ title=个人成长><span>个人成长</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/technology/ title=技术><span>技术</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/current-affairs/ title=时事><span>时事</span></a></li><li><a href=https://bsong2015.github.io/blog/posts/others/ title=其它><span>其它</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent"></h1><div class=post-meta></div></header><div class=post-content><h2 id=第17篇自动化身份供给scim协议如何简化用户管理>第17篇：自动化身份供给：SCIM协议如何简化用户管理<a hidden class=anchor aria-hidden=true href=#第17篇自动化身份供给scim协议如何简化用户管理>#</a></h2><p>在之前的文章中，我们讨论了身份认证（Authentication）和授权管理（Authorization）的各种核心协议与模型。然而，一个完整的身份和访问管理（IAM）体系，不仅仅包括“谁能登录”和“谁能做什么”，还必须高效地解决“用户身份信息如何创建、更新和同步到各个应用”的问题。这正是<strong>身份供给（Identity Provisioning）</strong> 的职责所在。</p><p>想象一下，当一个新员工入职时，他需要访问公司的CRM、ERP、协作套件（如Office 365）等多个系统。如果每次都需要IT管理员手动在每个系统中创建账户、分配权限，这无疑是一项繁琐、耗时且容易出错的工作。当员工离职或部门调动时，手动管理带来的效率低下和安全风险（权限未及时撤销）将更加凸显。</p><p><strong>SCIM（System for Cross-domain Identity Management）协议</strong>正是为了解决这一痛点而诞生的。它提供了一种标准化的方式，实现用户和组身份信息的自动化管理和跨域同步。</p><h3 id=1-scim的目标简化与标准化身份供给>1. SCIM的目标：简化与标准化身份供给<a hidden class=anchor aria-hidden=true href=#1-scim的目标简化与标准化身份供给>#</a></h3><p>SCIM是由IETF（互联网工程任务组）发布的一个开放标准，旨在简化和自动化用户和组身份信息在不同系统之间的交换。其核心目标可以概括为：</p><ul><li><strong>互操作性：</strong> 提供一个通用的、基于RESTful API的协议和JSON数据模型，使得任何支持SCIM的系统都能“开箱即用”地进行身份信息交换，避免了定制化开发带来的高成本和复杂性。</li><li><strong>自动化：</strong> 实现用户生命周期管理（创建、更新、禁用、删除）的自动化，减少人工干预。</li><li><strong>效率：</strong> 显著提升身份供给的效率，加速新员工入职、离职等流程。</li><li><strong>安全性：</strong> 确保身份信息的准确性和及时性，降低因手动操作导致的权限配置错误和安全漏洞。</li><li><strong>扩展性：</strong> 允许扩展核心的用户和组模式（Schema），以适应各种特定业务需求。</li></ul><p>在现代的<strong>IDaaS（Identity as a Service）</strong> 解决方案中，SCIM扮演着至关重要的角色。IDaaS平台通常作为中央身份源，通过SCIM与下游的各种SaaS应用（如Salesforce, Slack, Google Workspace, Microsoft 365等）进行用户和组信息的自动化同步。</p><h3 id=2-scim的核心资源用户与组>2. SCIM的核心资源：用户与组<a hidden class=anchor aria-hidden=true href=#2-scim的核心资源用户与组>#</a></h3><p>SCIM协议定义了两个核心的资源类型，用于表示和管理身份信息：</p><h4 id=21-用户user资源>2.1 用户（User）资源<a hidden class=anchor aria-hidden=true href=#21-用户user资源>#</a></h4><ul><li><strong>定义：</strong> 代表了系统中的一个独立用户身份。</li><li><strong>核心属性：</strong> SCIM User Schema定义了一套丰富的标准属性，包括：<ul><li><code>userName</code>：用户的唯一登录名（必填）。</li><li><code>id</code>：资源的唯一标识符。</li><li><code>displayName</code>：用户的显示名称。</li><li><code>name</code>：包含<code>givenName</code>（名）、<code>familyName</code>（姓）等子属性。</li><li><code>emails</code>：用户的邮箱地址（可以是多个，带类型如<code>work</code>, <code>home</code>）。</li><li><code>active</code>：布尔值，表示用户是否活跃/启用（用于禁用/启用用户）。</li><li><code>password</code>：密码（敏感信息，通常只用于设置/重置，不用于读取）。</li><li><code>groups</code>：用户所属的组列表（引用）。</li></ul></li><li><strong>扩展性：</strong> SCIM允许服务提供者通过自定义的<strong>扩展模式（Extension Schema）</strong> 来添加标准模式中没有的额外属性，以满足特定应用的业务需求，例如自定义的员工ID、组织架构信息等。</li></ul><h4 id=22-组group资源>2.2 组（Group）资源<a hidden class=anchor aria-hidden=true href=#22-组group资源>#</a></h4><ul><li><strong>定义：</strong> 代表了一组用户的集合。组在权限管理中非常有用，可以方便地对一组用户统一分配权限。</li><li><strong>核心属性：</strong> SCIM Group Schema定义了：<ul><li><code>displayName</code>：组的显示名称。</li><li><code>members</code>：组的成员列表，每个成员包含<code>value</code>（用户ID）和<code>displayName</code>（用户显示名）等。</li></ul></li></ul><p>SCIM通过这些标准化的资源和属性，确保了不同系统之间身份数据的一致性和可理解性。</p><h3 id=3-scim的核心操作crud与批量处理>3. SCIM的核心操作：CRUD与批量处理<a hidden class=anchor aria-hidden=true href=#3-scim的核心操作crud与批量处理>#</a></h3><p>SCIM协议基于RESTful原则，定义了一系列标准的HTTP方法来对用户和组资源进行操作，类似于我们熟悉的CRUD（创建、读取、更新、删除）。</p><h4 id=31-创建create>3.1 创建（Create）<a hidden class=anchor aria-hidden=true href=#31-创建create>#</a></h4><ul><li><strong>方法：</strong> <code>POST</code></li><li><strong>用途：</strong> 在目标系统中创建一个新的用户或组。</li><li><strong>示例：</strong> 向 <code>/Users</code> 或 <code>/Groups</code> 端点发送一个包含用户/组JSON数据的POST请求。</li></ul><h4 id=32-读取retrieve>3.2 读取（Retrieve）<a hidden class=anchor aria-hidden=true href=#32-读取retrieve>#</a></h4><ul><li><strong>方法：</strong> <code>GET</code></li><li><strong>用途：</strong> 获取一个特定用户/组的详细信息，或查询满足特定条件的用户/组列表。</li><li><strong>示例：</strong><ul><li>获取单个用户：<code>GET /Users/{id}</code></li><li>按用户名查询：<code>GET /Users?filter=userName eq "john.doe"</code></li><li>分页查询：<code>GET /Users?startIndex=1&amp;count=10</code></li></ul></li><li><strong>特性：</strong> SCIM支持丰富的过滤（<code>filter</code>）、排序（<code>sortBy</code>, <code>sortOrder</code>）和分页（<code>startIndex</code>, <code>count</code>）参数，以及指定返回属性（<code>attributes</code>, <code>excludedAttributes</code>），使得查询非常灵活高效。</li></ul><h4 id=33-更新update>3.3 更新（Update）<a hidden class=anchor aria-hidden=true href=#33-更新update>#</a></h4><ul><li><strong>方法：</strong> <code>PUT</code> 或 <code>PATCH</code></li><li><strong>用途：</strong> 修改现有用户或组的信息。<ul><li><strong><code>PUT</code>：</strong> 用于完全替换资源的现有状态（不常用，因为需要提交所有属性）。</li><li><strong><code>PATCH</code>：</strong> 用于部分更新资源。这是更推荐的方式，因为它允许只发送需要修改的属性，例如更改用户的部门、禁用用户、添加/移除组成员等。</li></ul></li><li><strong>示例：</strong><ul><li>更新用户：<code>PATCH /Users/{id}</code>，请求体中包含JSON Patch操作。</li><li>禁用用户：<code>PATCH /Users/{id}</code>，请求体 <code>{ "active": false }</code>。</li></ul></li></ul><h4 id=34-删除delete>3.4 删除（Delete）<a hidden class=anchor aria-hidden=true href=#34-删除delete>#</a></h4><ul><li><strong>方法：</strong> <code>DELETE</code></li><li><strong>用途：</strong> 从目标系统中删除一个用户或组。</li><li><strong>示例：</strong> <code>DELETE /Users/{id}</code></li></ul><h4 id=35-批量操作bulk-operations>3.5 批量操作（Bulk Operations）<a hidden class=anchor aria-hidden=true href=#35-批量操作bulk-operations>#</a></h4><ul><li><strong>方法：</strong> <code>POST</code> 到 <code>/Bulk</code> 端点</li><li><strong>用途：</strong> 允许在一个HTTP请求中执行多个SCIM操作（创建、更新、删除），从而减少网络往返次数，提高同步效率。这对于同步大量用户或组时非常有用。</li><li><strong>示例：</strong> 向 <code>/Bulk</code> 发送一个POST请求，请求体中包含一个操作数组，每个操作指定其方法、资源路径和数据。</li></ul><h3 id=4-scim在idaas中的应用>4. SCIM在IDaaS中的应用<a hidden class=anchor aria-hidden=true href=#4-scim在idaas中的应用>#</a></h3><p>SCIM协议是现代<strong>IDaaS（Identity as a Service）</strong> 解决方案的核心能力之一。一个典型的应用场景是：</p><ol><li><strong>中央身份源：</strong> 企业通常有一个中央身份目录（如Active Directory, LDAP）或是一个IDaaS平台本身作为主身份源。</li><li><strong>IDaaS作为供给桥梁：</strong> IDaaS平台集成SCIM客户端功能，可以作为连接中央身份源和各种下游应用之间的桥梁。</li><li><strong>自动化同步：</strong><ul><li>当新员工入职时，在中央身份源中创建其账户。IDaaS平台通过连接器（如AD Connector）感知到这一变化。</li><li>IDaaS平台随即触发SCIM协议，向所有支持SCIM的SaaS应用（例如Salesforce、Slack）发送<code>POST /Users</code>请求，自动为新员工创建账户。</li><li>当员工部门调动，其组发生变化时，IDaaS通过SCIM向相关应用发送<code>PATCH /Users/{id}</code>请求更新其组信息。</li><li>当员工离职时，IDaaS向各应用发送<code>PATCH /Users/{id}</code>（设置<code>active: false</code>禁用账户）或<code>DELETE /Users/{id}</code>请求，及时撤销其访问权限。</li></ul></li><li><strong>实时与定时同步：</strong> SCIM支持实时（事件驱动）或定时（批量）同步，以满足不同的业务需求。</li></ol><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph TD
    A[IDaaS] -- SCIM协议 --&gt; B(Salesforce)
    A -- SCIM协议 --&gt; C(Slack)
    A -- SCIM协议 --&gt; D(O365)
    A -- SCIM协议 --&gt; E(其他SaaS应用)

    subgraph 用户和组自动化同步
        A
        B
        C
        D
        E
    end
</code></pre><h3 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h3><p>SCIM协议是自动化身份供给的关键。它提供了一个标准化的、基于RESTful的框架，用于管理和同步用户与组的身份信息。通过定义统一的资源模式和操作方法，SCIM极大地降低了集成成本，提升了身份管理效率，并增强了安全性。在IDaaS解决方案中，SCIM更是扮演着核心角色，使得企业能够轻松实现跨域的用户生命周期自动化管理，告别繁琐的手动配置，让身份管理真正做到“一劳永逸”。</p><h3></h3><p><strong>欢迎关注+点赞+推荐+转发</strong></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://bsong2015.github.io/blog/>万年水的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>